<%var title = 'Account'%>

<script type="text/javascript" src="./js/account.js"></script>
<main class="col d-flex justify-content-center">
    <div class="text-center align-item-center" style="margin-bottom: auto; margin-top: 5%">
        <h1>Account Info</h1>
        <div class="alert alert-success alert-dismissible fade show visually-hidden" role="alert"
            style=" margin-bottom: 15px; min-height: 100%;">
            Successfully copied the token!
            <button type="button" class="btn-close close" data-dismiss="alert" aria-label="Close"
                onclick="$('.alert').alert('close')">
            </button>
        </div>
        <table class="table table-hover table-striped table-bordered">
            <thead class="thead-light">
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">Role</th>
                    <th scope="col">Token</th>
                    <th scope="col">Quota</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row"><%= user.name %></th>
                    <td><%= user.email %></td>
                    <td><%= user.role %></td>
                    <% if (token) { %>
                    <td><span style="text-decoration: underline 1px;"><%= token.token %></span></td>
                    <td><%= token.calls_available - token.calls_made %> / <%= token.calls_available %></td>
                    <td>
                        <a class="btn btn-primary btn-sm" onclick="copyToClipboard('<%= token.token %>')">
                            Copy </a>
                    </td>
                    <% } else { %>
                    <td>None</td>
                    <td>N/A</td>
                    <td>
                        <a id="btnApply" class="btn btn-primary btn-sm"> Apply </a>
                    </td>
                    <% } %>
                </tr>
            </tbody>
        </table>
    </div>
</main>